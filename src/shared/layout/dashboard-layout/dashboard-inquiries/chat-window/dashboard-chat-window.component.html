<div
  *ngIf="chat"
  class="flex flex-col"
>
  <div class="flex flex-row gap-2 mt-4 mr-8 justify-end">
    <div class="neutrals-text-950 caption-text">{{ chat.chat?.subject }}</div>
    <div
      class="small-vertical-line"
      [ngClass]="setLineColorClass(chat.chat?.subject)"
    ></div>
  </div>
  <div class="flex flex-row justify-between mt-4 mr-8 ml-6">
    <div class="neutrals-text-500 paragraph-text dir-rtl">{{ "מספר פניה: " + chat.messages_count }}</div>
    <div class="neutrals-text-950 paragraph-text-medium">{{ chat.chat?.creator_name }}</div>
  </div>
  <!-- block with chat window -->
  <div class="mt-9 chat-window-block ml-3-5 mr-6">
    <tui-scrollbar class="h-550">
      <div
        *ngFor="let message of chat.messages; let first = first"
        class="mt-9"
      >
        <div
          *ngIf="first"
          class="bg-blue-base-600 caption-text px-4 py-1 rounded-l margin-rl-auto w-fit-content white-text"
        >
          {{ dateChatMessages(message.updated_at) }}
        </div>
        <div
          class="flex flex-col mt-10 w-576px ml-4"
          [ngClass]="{
            'ml-auto': message.myself,
            'ml-4': !message.myself
          }"
        >
          <div
            class="h-28 rounded-m flex flex-row"
            [ngClass]="{
              'bg-bright-turquoise-50': message.myself,
              'bg-neutrals-20': !message.myself,
              'justify-end': !message.is_files,
              'justify-between': message.is_files
            }"
          >
            <div class="bg-bright-turquoise-100 rounded-m m-6 cursor-pointer">
              <div
                *ngIf="message.is_files"
                class="direct-inbox-icon-24 m-5"
                (click)="downloadPaymentExample(message.content)"
              ></div>
            </div>
            <div class="mt-4 mr-6 ml-4">
              <div class="neutrals-text-950 paragraph-text-medium text-end">{{ message.username }}</div>
              <div class="neutrals-text-950 paragraph-text text-end mt-2">{{ message.content }}</div>
            </div>
          </div>
          <div class="mt-2 flex flex-row gap-2-5 items-center">
            <div class="clock-icon-16"></div>
            <div class="neutrals-text-300 caption-text">{{ getTimeFromStringIsoDate(message.updated_at) }}</div>
          </div>
        </div>
      </div>
    </tui-scrollbar>
  </div>
  <div class="chat-menu-block bg-neutrals-950 rounded-l h-14 self-center flex flex-row gap-4">
    <div
      class="flex items-center justify-center bg-neutrals-20 block-w86-h40 rounded-m mt-2 ml-3 cursor-pointer"
      (click)="onSendMessage(chat.chat?.id, chat.chat?.employer_id)"
      [ngClass]="{ 'disabled-button': !isFileUploaded }"
    >
      <div class="send-message-icon-30"></div>
    </div>
    <smarti-input-field
      class="self-center"
      [placeholder]="'הקלד כאן...'"
      [customWidth]="'772px'"
      [customHeight]="'40px'"
      [inputTextFieldSize]="'s'"
      [control]="messageControl"
      [mode]="'onDark'"
    ></smarti-input-field>
    <div
      class="block-w112-h32 bg-neutrals-20 rounded-m self-center mr-4 flex flex-row gap-1 items-center justify-center cursor-pointer"
      (click)="addFileToMessage()"
    >
      <input
        type="file"
        hidden
        id="fileId"
        (change)="onFileChangeEvent($event)"
      />
      <div class="button-text-small bright-turquoise-text-500">צרף קבצים</div>
      <div class="attach-icon-horizontal-12"></div>
    </div>
  </div>
</div>
