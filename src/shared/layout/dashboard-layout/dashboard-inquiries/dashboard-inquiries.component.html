<div>
  <div class="flex flex-row justify-end mt-12">
    <div class="pr-6">
      <h2 class="medium neutrals-text-950 mt-0 mb-0 text-right">פניות</h2>
      <div class="neutrals-text-950 paragraph-text">במסך זה תוכל ליצור ולצפות בפניות מול הגורמים המתפעלים</div>
    </div>
  </div>
  <div class="flex flex-row justify-between mt-4">
    <div>
      <smarti-button
        [text]="'New chat'"
        [customButtonWidth]="'260px'"
        [customHeight]="'56px'"
        [typeClass]="'confirm'"
        [hasMessageIcon]="true"
        (buttonClicked)="openAddFileDialog(addFileDialogTemplate)"
      ></smarti-button>
    </div>
    <div>
      <smarti-custom-dropdown
        [customContent]="customDropdownContent"
        (clickEvent)="onCustomDropdownClick()"
      >
        <div
          *ngIf="!isCustomDropdownActive; else activeDropdownButtonTemplate"
          class="block-w172-h42 flex flex-row justify-center items-center gap-3 cursor-pointer"
        >
          <div class="green-left-arrow-icon-green-16"></div>
          <div class="paragraph-text-extra bright-turquoise-text-500">תהליך חדש</div>
        </div>
        <ng-template #activeDropdownButtonTemplate>
          <div class="block-w172-h42 flex flex-row justify-center items-center gap-3 cursor-pointer">
            <div class="green-right-arrow-icon-green-16"></div>
            <div class="paragraph-text-extra bright-turquoise-text-500">נקה</div>
          </div>
        </ng-template>
      </smarti-custom-dropdown>
    </div>
  </div>
  <div class="flex flex-row gap-6">
    <div class="w-full h-744 bg-white box-shadow-big mt-4 rounded-l mb-34">
      <ng-container *ngIf="chat$ | async as chat">
        <smarti-dashboard-chat-window [chat]="chat"></smarti-dashboard-chat-window>
      </ng-container>
      <ng-container *ngIf="isLoadingChatWindow">
        <smarti-loader
          [size]="'xl'"
          [paddingTop30percent]="true"
        ></smarti-loader>
      </ng-container>
    </div>
    <div class="block-w632-h744 bg-white box-shadow-big mt-4 rounded-l mb-34">
      <smarti-dashboard-chat-list
        [chatItems]="chatItems$ | async"
        (changeCurrentChatId)="changeCurrentChatId($event)"
      ></smarti-dashboard-chat-list>
    </div>
  </div>
</div>

<ng-template #customDropdownContent></ng-template>

<ng-template
  #addFileDialogTemplate
  let-observer
>
  <smarti-create-new-chat-dialog
    [observer]="observer"
    (sendRequest)="onCreateNewChatSendRequest($event)"
    [form]="createNewChatForm"
  ></smarti-create-new-chat-dialog>
</ng-template>
